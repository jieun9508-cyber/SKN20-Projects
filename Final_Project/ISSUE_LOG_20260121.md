# 이슈 해결 보고서 (2026-01-21)

금일 발생한 주요 이슈 및 조치 사항을 정리한 문서입니다.

## 1. 회원가입 시 `DataError` 발생

### 증상
*   특정 사용자(조원)가 회원가입 시도시 `DataError` 발생함.
*   에러 로그: `DataError at /api/core/users/` (value too long for type character varying(255))

### 원인
*   **DB 컬럼 길이 제한**: `UserDetail` 모델의 `job_role` (직군)과 `interests` (관심 분야) 컬럼이 `CharField(max_length=255)`로 설정됨.
*   다중 선택 기능으로 인해 선택 항목이 많아질 경우, 콤마(`,`)로 연결된 문자열 길이가 255자를 초과하여 DB 저장 시 에러 발생.

### 조치 내용
*   **파일**: `backend/core/models/user_model.py`
*   **변경**: 해당 필드의 타입을 `CharField` -> `TextField`로 변경하여 길이 제한 해제.

```python
# 변경 전
job_role = models.CharField(max_length=255, null=True, blank=True)
interests = models.CharField(max_length=255, null=True, blank=True)

# 변경 후
job_role = models.TextField(null=True, blank=True) 
interests = models.TextField(null=True, blank=True)
```

## 2. 로그인 불가 현상 및 로직 오류

### 증상
*   회원가입은 되지만 로그인이 되지 않는 현상 발생.
*   수정/삭제 API 호출 시 서버 에러(NameError) 발생 가능성 확인.

### 원인
1.  **`auth.User` 생성 누락**: View 로직에서 `user_id`가 클라이언트로부터 전달되지 않으면(이메일만 입력 시), Django의 기본 인증 테이블인 `auth.User`가 생성되지 않음. 이로 인해 로그인이 불가능.
2.  **Import 누락**: `user_view.py`에서 `permissions` 모듈을 사용(권한 체크)하고 있으나 import 문이 누락됨.

### 조치 내용
*   **파일**: `backend/core/views/user_view.py`
*   **변경 1**: `create` 메서드 내에서 `user_id`가 없을 경우 이메일 앞부분을 추출하여 할당하는 로직 추가 (`auth.User` 생성 연동).
*   **변경 2**: `permissions` 모듈 Import 추가.

```python
# Import 추가
from rest_framework import viewsets, serializers, permissions

# user_id 자동 생성 로직 추가
if not user_id and email:
    user_id = email.split('@')[0][:50]
    validated_data['user_id'] = user_id
```

## 3. 후속 조치
*   DB 마이그레이션 파일 생성 및 적용 완료 (`makemigrations`, `migrate`).
*   Docker 컨테이너 재시작 완료.
