<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lionì˜ ì½”ë”© í´ë˜ìŠ¤ - ì˜¤ë¦¬ì™€ í•¨ê»˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap');

        body {
            font-family: 'Nanum Gothic', sans-serif;
            background-color: #f0f9ff;
        }

        .block-item {
            cursor: grab;
            transition: transform 0.2s;
            position: relative;
        }

        .block-item:active {
            cursor: grabbing;
            transform: scale(0.95);
        }

        .block-item:hover .remove-hint {
            opacity: 1;
        }

        .remove-hint {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.2);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 10px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .duck-bubble {
            position: relative;
            background: #ffffff;
            border: 3px solid #fbbf24;
            border-radius: 20px;
            padding: 15px;
        }

        .duck-bubble::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 20px;
            border-width: 20px 20px 0 0;
            border-style: solid;
            border-color: #fbbf24 transparent transparent transparent;
        }

        .stage-container {
            min-height: 400px;
        }

        .drop-zone {
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            min-height: 100px;
        }

        .drop-item {
            cursor: pointer;
            border: 2px solid transparent;
        }

        .drop-item:hover {
            border-color: #ef4444;
            background-color: #fee2e2 !important;
            color: #ef4444;
        }
    </style>
</head>

<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border-4 border-blue-100">
        <!-- Header -->
        <div class="bg-blue-500 p-6 text-white flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold">Step <span id="stage-num">1</span>: <span id="stage-title">í•œê¸€ ë¸”ë¡
                        ë§ì¶”ê¸°</span></h1>
                <p class="text-blue-100 text-sm">ë°ì´í„° ë¶„ì„ ì „ë¬¸ê°€ Lionê³¼ í•¨ê»˜í•˜ëŠ” ë¡œì§ ì„¤ê³„</p>
            </div>
            <div class="flex items-center gap-4">
                <div class="bg-blue-600 px-4 py-2 rounded-full font-bold">ì ìˆ˜: <span id="score">0</span></div>
            </div>
        </div>

        <div class="flex flex-col md:flex-row h-full">
            <!-- Left: Duck & Chat Area -->
            <div class="w-full md:w-1/3 bg-yellow-50 p-6 border-r border-gray-100 flex flex-col items-center">
                <div class="mb-4 transform hover:scale-110 transition-transform">
                    <!-- Cute Duck SVG -->
                    <svg width="120" height="120" viewBox="0 0 200 200">
                        <circle cx="100" cy="100" r="80" fill="#fbbf24" />
                        <circle cx="70" cy="80" r="10" fill="black" />
                        <circle cx="130" cy="80" r="10" fill="black" />
                        <path d="M100 110 Q120 140 140 110" stroke="black" stroke-width="5" fill="none" />
                        <ellipse cx="100" cy="115" rx="30" ry="20" fill="#f97316" />
                    </svg>
                </div>
                <div class="duck-bubble shadow-sm w-full mb-4">
                    <p id="duck-msg" class="text-gray-800 font-bold leading-relaxed">ì•ˆë…•! ë‚˜ëŠ” ì½”ë”© ì˜¤ë¦¬ì•¼! ì˜¤ëŠ˜ ë‚˜ë‘ ê°™ì´ ì‚¬ê°í˜•ì„ ê·¸ë¦¬ëŠ”
                        ë¡œì§ì„ ë§Œë“¤ì–´ë³¼ê¹Œ?</p>
                </div>
                <div id="hint-area" class="text-xs text-blue-600 italic text-center">
                    (ì˜ëª» ë†“ì€ ë¸”ë¡ì€ í´ë¦­í•´ì„œ ì§€ìš¸ ìˆ˜ ìˆì–´!)
                </div>
            </div>

            <!-- Right: Interactive Area -->
            <div class="w-full md:w-2/3 p-6 stage-container">

                <!-- Stage 1: Puzzle -->
                <div id="stage-1" class="stage-content space-y-6">
                    <div class="flex justify-between items-end">
                        <div class="text-lg font-bold text-gray-700">ë¬¸ì œ: ì˜¤ë¦¬ê°€ 'ì •ì‚¬ê°í˜•'ì„ ê·¸ë¦¬ê²Œ ë¸”ë¡ì„ ë°°ì¹˜í•´ì¤˜!</div>
                        <button onclick="clearDropZone()"
                            class="text-xs bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-gray-600">ì „ì²´ ì‚­ì œ</button>
                    </div>
                    <div class="flex gap-4">
                        <div class="w-1/2">
                            <p class="text-sm font-bold text-gray-500 mb-2">ë¸”ë¡ ëª©ë¡ (ë“œë˜ê·¸í•˜ì„¸ìš”)</p>
                            <div id="blocks-source" class="space-y-2">
                                <div draggable="true" ondragstart="drag(event)" id="b1"
                                    class="block-item bg-blue-500 text-white p-3 rounded-lg text-sm shadow">10ë§Œí¼ ì›€ì§ì´ê¸°
                                </div>
                                <div draggable="true" ondragstart="drag(event)" id="b2"
                                    class="block-item bg-blue-500 text-white p-3 rounded-lg text-sm shadow">90ë„ ë°©í–¥ ë³´ê¸°
                                </div>
                                <div draggable="true" ondragstart="drag(event)" id="b3"
                                    class="block-item bg-orange-500 text-white p-3 rounded-lg text-sm shadow">4ë²ˆ ë°˜ë³µí•˜ê¸°
                                </div>
                                <div draggable="true" ondragstart="drag(event)" id="b4"
                                    class="block-item bg-blue-500 text-white p-3 rounded-lg text-sm shadow">90ë„ ëŒê¸°</div>
                            </div>
                        </div>
                        <div class="w-1/2">
                            <p class="text-sm font-bold text-gray-500 mb-2">ì¡°ë¦½ ì˜ì—­ (í´ë¦­í•˜ë©´ ì‚­ì œ)</p>
                            <div id="drop-zone-1" ondrop="drop(event)" ondragover="allowDrop(event)"
                                class="drop-zone p-4 space-y-2 bg-slate-50 min-h-[250px]">
                            </div>
                        </div>
                    </div>
                    <button onclick="checkStage1()"
                        class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition-colors shadow-lg">ë¡œì§
                        ê²€ì¦í•˜ê¸°</button>
                </div>

                <!-- Stage 2: Coding -->
                <div id="stage-2" class="stage-content hidden space-y-6">
                    <div class="text-lg font-bold mb-2 text-gray-700">ë¬¸ì œ: ì•ì„œ ë§Œë“  ë¡œì§ì„ ì‹¤ì œ ì½”ë“œë¡œ ì™„ì„±í•´ë´! (íŒŒì´ì¬ ìŠ¤íƒ€ì¼)</div>
                    <div
                        class="bg-gray-800 rounded-xl p-6 text-emerald-400 font-mono text-lg leading-loose shadow-inner">
                        <div><span class="text-pink-400">for</span> i <span class="text-pink-400">in</span> range(<input
                                id="blank-1" type="text"
                                class="bg-gray-700 border-b-2 border-emerald-400 w-12 text-center outline-none focus:bg-gray-600"
                                placeholder="?">):</div>
                        <div class="pl-8">duck.move(<input id="blank-2" type="text"
                                class="bg-gray-700 border-b-2 border-emerald-400 w-12 text-center outline-none focus:bg-gray-600"
                                placeholder="?">)</div>
                        <div class="pl-8">duck.turn(<input id="blank-3" type="text"
                                class="bg-gray-700 border-b-2 border-emerald-400 w-12 text-center outline-none focus:bg-gray-600"
                                placeholder="?">)</div>
                    </div>
                    <button onclick="checkStage2()"
                        class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition-colors shadow-lg">ì½”ë“œ
                        ì»´íŒŒì¼í•˜ê¸°</button>
                </div>

                <!-- Stage 3: Verification -->
                <div id="stage-3" class="stage-content hidden space-y-6 text-center">
                    <div class="text-lg font-bold mb-2 text-gray-700">ìµœì¢… ì„¤ê³„ ê²€ì¦</div>
                    <div class="bg-blue-50 p-6 rounded-2xl border-2 border-blue-200">
                        <p class="text-gray-700 mb-4 font-bold">"ì´ ì½”ë“œê°€ ì‚¼ê°í˜•ì„ ê·¸ë¦¬ê²Œ í•˜ë ¤ë©´ ë¬´ì—‡ì„ ìˆ˜ì •í•´ì•¼ í• ê¹Œ?"</p>
                        <div class="grid grid-cols-1 gap-3">
                            <button onclick="verify(false)"
                                class="p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-400 text-left transition-all">A.
                                ë°˜ë³µ íšŸìˆ˜ë¥¼ 3ìœ¼ë¡œ ì¤„ì´ê³  ê°ë„ë¥¼ 90ë„ë¡œ ìœ ì§€í•œë‹¤.</button>
                            <button onclick="verify(true)"
                                class="p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-400 text-left transition-all font-medium">B.
                                ë°˜ë³µ íšŸìˆ˜ë¥¼ 3ìœ¼ë¡œ ì¤„ì´ê³  ê°ë„ë¥¼ 120ë„ë¡œ ë°”ê¾¼ë‹¤.</button>
                            <button onclick="verify(false)"
                                class="p-4 bg-white border-2 border-gray-200 rounded-xl hover:border-blue-400 text-left transition-all">C.
                                ì›€ì§ì´ëŠ” ê±°ë¦¬ë¥¼ 3ë§Œí¼ ì¤„ì¸ë‹¤.</button>
                        </div>
                    </div>
                </div>

                <!-- Success Screen -->
                <div id="stage-success" class="stage-content hidden text-center space-y-6">
                    <div class="text-6xl mb-4">ğŸŠ</div>
                    <h2 class="text-3xl font-black text-gray-800">ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
                    <p class="text-gray-600 font-bold text-xl">Lionë‹˜, ë‹¹ì‹ ì€ ì´ì œ í›Œë¥­í•œ ë¡œì§ ì„¤ê³„ìì…ë‹ˆë‹¤!</p>
                    <button onclick="location.reload()"
                        class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-3 rounded-full font-bold shadow-lg transition-transform active:scale-95">ë‹¤ì‹œ
                        ì‹œì‘í•˜ê¸°</button>
                </div>

            </div>
        </div>
    </div>

    <script>
        let currentScore = 0;
        let duckMsg = document.getElementById('duck-msg');

        // Drag and Drop Logic
        function allowDrop(ev) { ev.preventDefault(); }
        function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
        function drop(ev) {
            ev.preventDefault();
            var data = ev.dataTransfer.getData("text");
            var originalNode = document.getElementById(data);
            var nodeCopy = originalNode.cloneNode(true);

            nodeCopy.id = "new_" + Math.random();
            nodeCopy.classList.add("mb-2", "drop-item");

            // Add Remove capability
            nodeCopy.innerHTML += '<span class="remove-hint">ì‚­ì œ</span>';
            nodeCopy.onclick = function () {
                this.remove();
                updateDuckMessage("ì§€ì› êµ¬ë‚˜! ë‹¤ì‹œ ì‹ ì¤‘í•˜ê²Œ ë¸”ë¡ì„ ê³¨ë¼ë³´ì.");
            };

            ev.target.appendChild(nodeCopy);
            updateDuckMessage("ì˜¤! ë¸”ë¡ì„ í•˜ë‚˜ ì˜®ê²¼ë„¤? ì˜ëª» ë†“ì•˜ë‹¤ë©´ í´ë¦­í•´ì„œ ì§€ìš¸ ìˆ˜ ìˆì–´!");
        }

        function clearDropZone() {
            document.getElementById('drop-zone-1').innerHTML = '';
            updateDuckMessage("ê¹¨ë—í•˜ê²Œ ë¹„ì› ì–´! ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì°¨ê·¼ì°¨ê·¼ í•´ë³´ì.");
        }

        function updateDuckMessage(msg) {
            duckMsg.innerText = msg;
        }

        function checkStage1() {
            const dropZone = document.getElementById('drop-zone-1');
            const items = dropZone.children;

            if (items.length >= 3 &&
                items[0].innerText.includes("ë°˜ë³µ") &&
                items[1].innerText.includes("ì›€ì§ì´ê¸°") &&
                items[2].innerText.includes("ëŒê¸°")) {
                currentScore += 30;
                document.getElementById('score').innerText = currentScore;
                updateDuckMessage("ì™„ë²½í•´! 4ë²ˆ ë°˜ë³µí•˜ë©´ì„œ ì•ìœ¼ë¡œ ê°€ê³  90ë„ë¥¼ ëŒë©´ ì‚¬ê°í˜•ì´ ì™„ì„±ë˜ì§€! ì´ì œ ì‹¤ì œ ì½”ë“œë¡œ ë„ì „í•´ë³¼ê¹Œ?");
                setTimeout(goToStage2, 2000);
            } else if (items.length === 0) {
                updateDuckMessage("ë¸”ë¡ì´ í•˜ë‚˜ë„ ì—†ë„¤? ì™¼ìª½ì—ì„œ ë¸”ë¡ì„ ëŒì–´ë‹¤ ë†“ì•„ì¤˜!");
            } else {
                updateDuckMessage("ìŒ... ìˆœì„œê°€ ì¡°ê¸ˆ ì–´ìƒ‰í•œ ê²ƒ ê°™ì•„. 'ë°˜ë³µ' ì•ˆì— 'ì›€ì§ì´ê¸°'ì™€ 'ëŒê¸°'ê°€ ìˆœì„œëŒ€ë¡œ ìˆì–´ì•¼ í•´. í´ë¦­í•´ì„œ ë‹¤ì‹œ ë°°ì¹˜í•´ë´!");
            }
        }

        function goToStage2() {
            document.getElementById('stage-1').classList.add('hidden');
            document.getElementById('stage-2').classList.remove('hidden');
            document.getElementById('stage-num').innerText = "2";
            document.getElementById('stage-title').innerText = "ì¼ë°˜ ì½”ë“œ ë¹ˆì¹¸ ë„£ê¸°";
            updateDuckMessage("ì´ì œ íŒŒì´ì¬ ì½”ë“œë¥¼ ì™„ì„±í•´ë³´ì! ì‚¬ê°í˜•ì„ ê·¸ë¦¬ë ¤ë©´ ìˆ«ìê°€ ì–´ë–»ê²Œ ë“¤ì–´ê°€ì•¼ í• ê¹Œ?");
        }

        function checkStage2() {
            const b1 = document.getElementById('blank-1').value;
            const b2 = document.getElementById('blank-2').value;
            const b3 = document.getElementById('blank-3').value;

            if (b1 == "4" && b2 == "10" && b3 == "90") {
                currentScore += 40;
                document.getElementById('score').innerText = currentScore;
                updateDuckMessage("ì²œì¬ì¸ë°? ë¬¸ë²•ë„ ì™„ë²½í•˜ê²Œ ì´í•´í–ˆì–´! ì´ì œ ë§ˆì§€ë§‰ ê´€ë¬¸ìœ¼ë¡œ ê°€ì.");
                setTimeout(goToStage3, 2000);
            } else {
                updateDuckMessage("ì•—, ìˆ«ìë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë´! ì‚¬ê°í˜•ì€ 4ë²ˆ ë°˜ë³µ, 10ë§Œí¼ ì´ë™, 90ë„ íšŒì „ì´ì•¼.");
            }
        }

        function goToStage3() {
            document.getElementById('stage-2').classList.add('hidden');
            document.getElementById('stage-3').classList.remove('hidden');
            document.getElementById('stage-num').innerText = "3";
            document.getElementById('stage-title').innerText = "ì„¤ê³„ ë° ê²€ì¦";
            updateDuckMessage("ì½”ë”©ì˜ ê½ƒì€ 'ì‘ìš©'ì´ì•¼! ì‚¼ê°í˜•ì„ ê·¸ë¦¬ë ¤ë©´ ì–´ë–¤ ë³€í™”ê°€ í•„ìš”í• ì§€ ë§ì¶°ë´.");
        }

        function verify(isCorrect) {
            if (isCorrect) {
                currentScore += 30;
                document.getElementById('score').innerText = currentScore;
                updateDuckMessage("ëŒ€ë‹¨í•´! ì™¸ê°ì˜ í•©ì€ 360ë„ì—¬ì•¼ í•˜ë‹ˆê¹Œ 360/3=120ë„ë¥¼ íšŒì „í•´ì•¼ í•´!");
                setTimeout(() => {
                    document.getElementById('stage-3').classList.add('hidden');
                    document.getElementById('stage-success').classList.remove('hidden');
                    document.getElementById('stage-title').innerText = "í•™ìŠµ ì™„ë£Œ";
                }, 1500);
            } else {
                updateDuckMessage("ì•„ì‰¬ì›Œ! ì‚¼ê°í˜•ì€ ê°ë„ê°€ 90ë„ë³´ë‹¤ ë” ë§ì´ êº¾ì—¬ì•¼ í•´. íŒíŠ¸ëŠ” 360 ë‚˜ëˆ„ê¸° 3!");
            }
        }
    </script>
</body>

</html>